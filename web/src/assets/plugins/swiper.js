// 项目地址 https://github.com/clovme/swiper

const Swiper=(options={url:"",speed:6e3,duration:4,data:[],success:void 0})=>{let dataIndex=0,swiperIndex=0,cursorIndex=0,isStart=!1;const bg=[];shuffleArray(options.data);const{el:el="body",id:id="#swiper",speed:speed=6e3,duration:duration=_duration(),data:data=[]}=options;function shuffleArray(array){if(!options.data||0===options.data.length){const e=new XMLHttpRequest;e.open("GET",options.url,!1),e.onreadystatechange=function(){if(e.readyState===XMLHttpRequest.DONE)try{array=JSON.parse(e.responseText)}catch(t){array=[],console.warn(`\n%c 背景图片请求内URL: %c ${options.url} \n%c 背景图片请求内容为: %c\n${e.responseText}\n%c 背景图片错误信息为: %c\n${t}`,"color: #fff; background: #5f5f5f","","color: #fff; background: #5f5f5f","","color: #fff; background: #5f5f5f","")}},e.send()}options.success&&(array="string"==typeof options.success?eval(options.success)(array):options.success(array));try{for(let e=array.length-1;e>0;e--){const t=Math.floor(Math.random()*(e+1));[array[e],array[t]]=[array[t],array[e]]}options.data=array}catch(e){console.error(`图片数组为: ${array},请传入图片数组,错误信息为: ${e}`),options.data=[]}}function _duration(){let e=speed/1e3-2;return e<=0&&(e=2),e}function createDOM(e,t){let n=createElementDiv();return changeBackground(n,t),e.appendChild(n),n}function nextIndex(){return dataIndex=dataIndex>=data.length-1?0:dataIndex+1,dataIndex}function createElementDiv(){const e=document.createElement("div");return e.style.setProperty("width","100%"),e.style.setProperty("height","100%"),e.style.setProperty("position","fixed"),e.style.setProperty("left","0"),e.style.setProperty("top","0"),e}function changeBackground(e,t){e.style.setProperty("background",`url("${data[t]}") center center / cover no-repeat`)}function containerEl(){const e=createElementDiv();return e.style.setProperty("z-index","-999"),document.body.appendChild(e),e}function swiperNextIndex(){return swiperIndex=swiperIndex>=bg.length-1?0:swiperIndex+1,swiperIndex}function swiperBgIndex(){let e=new Set([cursorIndex,swiperIndex]);return Array.from(new Set([...new Set([0,1,2])].filter((t=>!e.has(t)))))[0]}function changeTransition(e,t,n){return e.style.setProperty("opacity",`${t}`),e.style.setProperty("transition",n),e}function swiperBackground(){changeTransition(bg[cursorIndex],1,`opacity ${duration}s ease-in`);const e=changeTransition(bg[swiperNextIndex()],0,"");changeTransition(bg[swiperBgIndex()],0,`opacity ${duration}s ease-out`),isStart&&changeBackground(e,nextIndex()),cursorIndex=swiperIndex,isStart=!0}if(!document.getElementById("#body-swiper")&&data.length>0){const e=containerEl();e.setAttribute("id","#body-swiper"),bg.push(createDOM(e,dataIndex)),bg.push(createDOM(e,nextIndex())),bg.push(createDOM(e,nextIndex())),swiperBackground(),setInterval(swiperBackground,speed)}};