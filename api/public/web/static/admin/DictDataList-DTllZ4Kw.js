import{d as f,y as g,r as x,b as _,V as a,c as r,i as h,o as v,w as d,g as m,m as y}from"./index-Cvc_Iv1t.js";import{a as b,b as C,c as D}from"./dict-DAqDIUCg.js";const R=f({__name:"DictDataList",setup(w){const s=g(),c=x(),u=_({id:"DictDataList",height:"100%",keepSource:!0,showOverflow:!0,rowConfig:{isHover:!0},sortConfig:{remote:!0,multiple:!0},editConfig:{mode:"row",showStatus:!0,enabled:a.permission.checkVisible("dictManageActionInsert|dictManageActionUpdate")},customConfig:{storage:!0},toolbarConfig:{refresh:!0,zoom:!0,buttons:[{name:"新增",code:"insert_edit",status:"primary",icon:"vxe-icon-add",permissionCode:"dictManageActionInsert"},{name:"标记/删除",code:"mark_cancel",status:"error",icon:"vxe-icon-delete",permissionCode:"dictManageActionDelete"},{name:"保存",code:"save",status:"success",icon:"vxe-icon-save",permissionCode:"dictManageActionInsert|dictManageActionDelete|dictManageActionUpdate"}]},formConfig:{titleWidth:80,titleAlign:"right",items:[{field:"name",title:"值",span:6,itemRender:{name:"VxeInput"}},{field:"code",title:"内容",span:6,itemRender:{name:"VxeInput"}},{itemRender:{name:"VxeButtonGroup",options:[{type:"submit",content:"查询",status:"primary",icon:"vxe-icon-search"},{type:"reset",content:"重置",icon:"vxe-icon-repeat"}]}}]},pagerConfig:{},columns:[{type:"checkbox",width:60},{type:"seq",width:70},{field:"code",title:"值",sortable:!0,width:200,editRender:{name:"VxeInput"}},{field:"name",title:"内容",minWidth:200,editRender:{name:"VxeInput"}},{field:"updateTime",title:"最后更新时间",width:160,formatter:"FormatDateTime",sortable:!0},{field:"createTime",title:"创建时间",width:160,formatter:"FormatDateTime",sortable:!0},{field:"action",title:"操作",fixed:"right",width:80,slots:{default:"action"}}],proxyConfig:{form:!0,sort:!0,ajax:{query({page:e,form:t,sorts:i}){const n={...e,...t,pId:s.query.pId,orderBy:i.map(o=>`${o.field}|${o.order}`).join(",")};return C(n)},save({body:e}){return b({...e,pId:s.query.pId})}}}}),l=async e=>{const t=c.value;if(t&&t.isInsertByRow(e)){t.remove(e);return}await a.modal.confirm({content:`该操作将会同时删除对应的配置项，请确认是否删除 “ ${e.name} ”？`})==="confirm"&&D({_id:e._id}).then(()=>{t&&t.commitProxy("query"),a.modal.message({content:"删除成功",status:"success"})})};return(e,t)=>{const i=r("vxe-button"),n=r("vxe-grid"),o=r("PageView");return v(),h(o,null,{default:d(()=>[m(n,y({ref_key:"gridRef",ref:c},u),{action:d(({row:p})=>[m(i,{mode:"text",status:"error",icon:"vxe-icon-delete","permission-code":"dictManageActionDelete",onClick:I=>l(p)},null,8,["onClick"])]),_:1},16)]),_:1})}}});export{R as default};
