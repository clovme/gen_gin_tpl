import{d as f,r as g,b as _,V as a,c as n,i as x,o as v,w as s,g as c,m as h,h as b}from"./index-Cvc_Iv1t.js";import{p as C,g as y,d as w}from"./dict-DAqDIUCg.js";const I=f({__name:"DictManageList",setup(k){const d=g(),l=_({id:"DictManageList",height:"100%",keepSource:!0,showOverflow:!0,rowConfig:{isHover:!0},sortConfig:{remote:!0,multiple:!0},editConfig:{mode:"row",showStatus:!0,enabled:a.permission.checkVisible("dictManageActionInsert|dictManageActionUpdate")},customConfig:{storage:!0},toolbarConfig:{refresh:!0,zoom:!0,buttons:[{name:"新增",code:"insert_edit",status:"primary",icon:"vxe-icon-add",permissionCode:"dictManageActionInsert"},{name:"标记/删除",code:"mark_cancel",status:"error",icon:"vxe-icon-delete",permissionCode:"dictManageActionDelete"},{name:"保存",code:"save",status:"success",icon:"vxe-icon-save",permissionCode:"dictManageActionInsert|dictManageActionDelete|dictManageActionUpdate"}]},formConfig:{titleWidth:80,titleAlign:"right",items:[{field:"name",title:"字典名称",span:6,itemRender:{name:"VxeInput",props:{clearable:!0}}},{field:"code",title:"字典编码",span:6,itemRender:{name:"VxeInput",props:{clearable:!0}}},{itemRender:{name:"ListSearchBtn"}}]},pagerConfig:{},columns:[{type:"checkbox",width:60},{type:"seq",width:70},{field:"code",title:"字典编码",sortable:!0,width:200,editRender:{name:"VxeInput"}},{field:"name",title:"字典名称",minWidth:200,editRender:{name:"VxeInput"}},{field:"updateTime",title:"最后更新时间",width:160,formatter:"FormatDateTime",sortable:!0},{field:"createTime",title:"创建时间",width:160,formatter:"FormatDateTime",sortable:!0},{field:"action",title:"操作",fixed:"right",width:120,slots:{default:"action"}}],proxyConfig:{form:!0,sort:!0,ajax:{query({page:t,form:e,sorts:i}){const r={...t,...e,orderBy:i.map(o=>`${o.field}|${o.order}`).join(",")};return y(r)},save({body:t}){return C(t)}}}}),u=async t=>{const e=d.value;if(e&&e.isInsertByRow(t)){e.remove(t);return}await a.modal.confirm({content:`该操作将会同时删除对应的配置项，请确认是否删除 “ ${t.name} ”？`})==="confirm"&&w({_id:t._id}).then(()=>{e&&e.commitProxy("query"),a.modal.message({content:"删除成功",status:"success"})})};return(t,e)=>{const i=n("vxe-link"),r=n("vxe-button"),o=n("vxe-grid"),p=n("PageView");return v(),x(p,null,{default:s(()=>[c(o,h({ref_key:"gridRef",ref:d},l),{action:s(({row:m})=>[c(i,{status:"primary",icon:"vxe-icon-association-form","router-link":{name:"DictDataList",query:{pId:m._id}}},{default:s(()=>e[0]||(e[0]=[b("配置",-1)])),_:2,__:[0]},1032,["router-link"]),c(r,{mode:"text",status:"error",icon:"vxe-icon-delete","permission-code":"dictManageActionDelete",onClick:D=>u(m)},null,8,["onClick"])]),_:1},16)]),_:1})}}});export{I as default};
