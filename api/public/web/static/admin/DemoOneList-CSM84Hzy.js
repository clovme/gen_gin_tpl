import{d as x,r as g,b as _,V as s,c as o,i as h,o as v,w as r,g as d,m as b,h as c}from"./index-Cvc_Iv1t.js";import{p as D,g as V,d as k}from"./demo-CMLkByFN.js";const I=x({__name:"DemoOneList",setup(w){const m=g(),u=_({id:"DemoOneList",height:"100%",keepSource:!0,showOverflow:!0,rowConfig:{isHover:!0},sortConfig:{remote:!0,multiple:!0},editConfig:{mode:"row",showStatus:!0,enabled:s.permission.checkVisible("demoOneActionInsert|demoOneActionUpdate")},editRules:{name:[{required:!0,message:"请输入名称"}]},customConfig:{storage:!0},toolbarConfig:{refresh:!0,zoom:!0,buttons:[{name:"新增",code:"insert_edit",status:"primary",icon:"vxe-icon-add",permissionCode:"demoOneActionInsert"},{name:"标记/删除",code:"mark_cancel",status:"error",icon:"vxe-icon-delete",permissionCode:"demoOneActionDelete"},{name:"保存",code:"save",status:"success",icon:"vxe-icon-save",permissionCode:"demoOneActionInsert|demoOneActionDelete|demoOneActionUpdate"}]},formConfig:{titleWidth:80,titleAlign:"right",items:[{field:"name",title:"名称",span:6,itemRender:{name:"VxeInput"}},{field:"nickname",title:"昵称",span:6,itemRender:{name:"VxeInput"}},{field:"code",title:"编码",span:6,itemRender:{name:"VxeInput"}},{field:"amount",title:"金额",span:6,itemRender:{name:"VxeNumberInput"}},{field:"startDate",title:"开始时间",span:6,folding:!0,itemRender:{name:"VxeDatePicker",props:{clearable:!0}}},{field:"endDate",title:"结束时间",span:6,folding:!0,itemRender:{name:"VxeDatePicker",props:{clearable:!0}}},{span:24,align:"center",collapseNode:!0,itemRender:{name:"ListSearchBtn"}}]},pagerConfig:{},columns:[{type:"checkbox",width:60},{type:"seq",width:70},{field:"name",title:"名称",minWidth:200,editRender:{name:"VxeInput"}},{field:"code",title:"编码",sortable:!0,width:200,editRender:{name:"VxeInput"}},{field:"amount",title:"金额",sortable:!0,width:200,editRender:{name:"VxeNumberInput"}},{field:"nickname",title:"昵称",sortable:!0,width:200,editRender:{name:"VxeInput"}},{field:"commenceDate",title:"开工日期",width:200,editRender:{name:"VxeDatePicker"}},{field:"describe",title:"描述",width:200,editRender:{name:"VxeInput"}},{field:"updateTime",title:"最后更新时间",width:160,formatter:"FormatDateTime",sortable:!0},{field:"createTime",title:"创建时间",width:160,formatter:"FormatDateTime",sortable:!0},{field:"action",title:"操作",fixed:"right",width:160,slots:{default:"action"}}],proxyConfig:{form:!0,sort:!0,ajax:{query({page:t,form:e,sorts:n}){const a={...t,...e,orderBy:n.map(i=>`${i.field}|${i.order}`).join(",")};return V(a)},save({body:t}){return D({...t})}}}}),p=async t=>{const e=m.value;if(e&&e.isInsertByRow(t)){e.remove(t);return}await s.modal.confirm({content:`请确认是否删除 “ ${t.name} ”？`})==="confirm"&&k({_id:t._id}).then(()=>{e&&e.commitProxy("query"),s.modal.message({content:"删除成功",status:"success"})})};return(t,e)=>{const n=o("vxe-link"),a=o("vxe-button"),i=o("vxe-grid"),f=o("PageView");return v(),h(f,null,{default:r(()=>[d(i,b({ref_key:"gridRef",ref:m},u),{action:r(({row:l})=>[d(n,{status:"primary",icon:"vxe-icon-association-form","router-link":{name:"DemoOneDetails",query:{id:l._id}},"permission-code":"DemoOneDetails"},{default:r(()=>e[0]||(e[0]=[c("详情",-1)])),_:2,__:[0]},1032,["router-link"]),d(a,{mode:"text",status:"error",icon:"vxe-icon-delete",onClick:R=>p(l),"permission-code":"demoOneActionDelete"},{default:r(()=>e[1]||(e[1]=[c("删除",-1)])),_:2,__:[1]},1032,["onClick"])]),_:1},16)]),_:1})}}});export{I as default};
