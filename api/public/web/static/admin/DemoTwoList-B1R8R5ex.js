import{d as D,r as w,b as h,c as a,i as f,o as m,w as o,g as d,m as k,h as l,e as y,z as b,V as u,j as p}from"./index-Dydifo4O.js";import{p as v,g as T,d as C}from"./demo-BIhve4sl.js";const V={key:1},I=D({__name:"DemoTwoList",setup(R){const c=w(),_=h({id:"DemoTwoList",height:"100%",keepSource:!0,showOverflow:!0,rowConfig:{isHover:!0},sortConfig:{remote:!0,multiple:!0},customConfig:{storage:!0},toolbarConfig:{refresh:!0,zoom:!0,buttons:[{name:"新增",status:"primary",icon:"vxe-icon-add",permissionCode:"DemoTwoAdd",routerLink:{name:"DemoTwoAdd"}},{name:"批量删除",code:"delete",status:"error",icon:"vxe-icon-delete",permissionCode:"demoTwoActionDelete"}]},formConfig:{titleWidth:80,titleAlign:"right",items:[{field:"name",title:"名称",span:6,itemRender:{name:"VxeInput"}},{field:"nickname",title:"昵称",span:6,itemRender:{name:"VxeInput"}},{field:"code",title:"编码",span:6,itemRender:{name:"VxeInput"}},{field:"amount",title:"金额",span:6,itemRender:{name:"VxeNumberInput"}},{field:"startDate",title:"开始时间",span:6,folding:!0,itemRender:{name:"VxeDatePicker",props:{clearable:!0}}},{field:"endDate",title:"结束时间",span:6,folding:!0,itemRender:{name:"VxeDatePicker",props:{clearable:!0}}},{span:24,align:"center",collapseNode:!0,itemRender:{name:"ListSearchBtn"}}]},pagerConfig:{},columns:[{type:"checkbox",width:60},{type:"seq",width:70},{field:"name",title:"名称",minWidth:200,slots:{default:"default_name"}},{field:"code",title:"编码",sortable:!0,width:200},{field:"amount",title:"金额",sortable:!0,width:200},{field:"nickname",title:"昵称",sortable:!0,width:200},{field:"commenceDate",title:"开工日期",formatter:"FormatDateDefault",width:200},{field:"describe",title:"描述",width:200},{field:"updateTime",title:"最后更新时间",width:160,formatter:"FormatDateTime",sortable:!0},{field:"createTime",title:"创建时间",width:160,formatter:"FormatDateTime",sortable:!0},{field:"action",title:"操作",fixed:"right",width:160,slots:{default:"action"}}],proxyConfig:{form:!0,sort:!0,ajax:{query({page:t,form:e,sorts:n}){const s={...t,...e,orderBy:n.map(r=>`${r.field}|${r.order}`).join(",")};return T(s)},delete({body:t}){return v({...t})}}}}),g=async t=>{const e=c.value;if(e&&e.isInsertByRow(t)){e.remove(t);return}await u.modal.confirm({content:`请确认是否删除 “ ${t.name} ”？`})==="confirm"&&C({_id:t._id}).then(()=>{e&&e.commitProxy("query"),u.modal.message({content:"删除成功",status:"success"})})};return(t,e)=>{const n=a("vxe-link"),s=a("vxe-button"),r=a("vxe-grid"),x=a("PageView");return m(),f(x,null,{default:o(()=>[d(r,k({ref_key:"gridRef",ref:c},_),{default_name:o(({row:i})=>[b(u).permission.checkVisible("DemoTwoDetails")?(m(),f(n,{key:0,status:"primary","router-link":{name:"DemoTwoDetails",query:{id:i._id}}},{default:o(()=>[l(p(i.name),1)]),_:2},1032,["router-link"])):(m(),y("span",V,p(i.name),1))]),action:o(({row:i})=>[d(n,{status:"primary",icon:"vxe-icon-edit","router-link":{name:"DemoTwoEdit",query:{id:i._id}},"permission-code":"DemoTwoEdit"},{default:o(()=>e[0]||(e[0]=[l("编辑",-1)])),_:2,__:[0]},1032,["router-link"]),d(s,{mode:"text",status:"error",icon:"vxe-icon-delete",onClick:P=>g(i),"permission-code":"demoTwoActionDelete"},{default:o(()=>e[1]||(e[1]=[l("删除",-1)])),_:2,__:[1]},1032,["onClick"])]),_:1},16)]),_:1})}}});export{I as default};
